# Decoding Den Framework Development Plan

## Overall Vision
Build a rule-based content generation framework for all 44+ English phonemes that automatically populates accurate, research-based data for each phoneme/grapheme pair. This framework will enable on-demand access to any phoneme with consistent quality and Science of Reading alignment.

## Project Scope
- **Target**: Complete English phoneme database (44+ phonemes √ó multiple graphemes each)
- **Foundation**: Current /sh/ implementation serves as reference template
- **Goal**: Teachers can access any phoneme/grapheme pair instantly with accurate, consistent data

## Development Phases

### Phase 1: Stage-Based Decodability System ‚¨ÖÔ∏è **CURRENT PHASE**
**Objective**: Build the core logic for stage-aware word list generation and decodability calculation

**Components to Build**:
1. **Phoneme-to-Stage Mapping**: Connect phonemes to 8-stage progression system
2. **Word-Phoneme Database**: Create infrastructure for mapping words to required phonemes
3. **Decodability Calculator**: Real-time calculation of decodability percentages
4. **Stage-Aware Word Filtering**: Filter word lists based on cumulative taught phonemes
5. **UI Updates**: Display stage numbers and actual decodability percentages

**Success Criteria**:
- Word lists show only words decodable with phonemes from current and previous stages
- Accurate decodability percentage calculation and display
- Stage information visible in UI
- Teaching notes claim becomes factually accurate

**Files to Create/Modify**:
- `/lib/decodability/wordPhonemeDatabase.ts`
- `/lib/decodability/decodabilityCalculator.ts` 
- `/lib/decodability/stageBasedFiltering.ts`
- Enhance: `/app/decoding-den/components/WordListPractice.tsx`

### Phase 2: Content Generation Rules
**Objective**: Build intelligent rules for all component data population

**Components**:
- Frequency ranking logic
- Alternative spelling discovery rules
- Phoneme type classification
- Example word selection algorithms
- Articulation guidance mapping
- Research citation linking

### Phase 3: Display Logic Framework
**Objective**: Standardize formatting and presentation rules

**Components**:
- Conditional content display rules
- Formatting standards across all components
- Consistency validation
- Quality assurance checks

### Phase 4: Full Database Generation
**Objective**: Apply framework to generate complete phoneme database

**Components**:
- Batch generation processes
- Data validation systems
- Quality control measures
- Database optimization

## Current Status

### ‚úÖ Completed
- Basic /sh/ framework implementation
- 8-stage progression system (allStagesDatabase.ts)
- Core UI components and layout
- Research foundation and citations
- **Phase 1: Stage-Based Decodability System** ‚úÖ
  - ‚úÖ Phoneme-to-stage mapping (`phonemeStageMapper.ts`)
  - ‚úÖ Word-phoneme database foundation (`wordPhonemeDatabase.ts`)
  - ‚úÖ Decodability calculator (`decodabilityCalculator.ts`)
  - ‚úÖ Stage-aware word filtering (`stageBasedFiltering.ts`)
  - ‚úÖ Integration with WordListPractice component
  - ‚úÖ Actual decodability percentage calculation and display
  - ‚úÖ Stage information visible in UI
  - ‚úÖ Teaching notes now factually accurate
- **Phase 2: Content Generation Rules** ‚úÖ
  - ‚úÖ Core content generation framework (`phonemeContentRules.ts`)
  - ‚úÖ Frequency ranking with intelligent descriptions
  - ‚úÖ Phoneme type classification (consonant, vowel, digraph, etc.)
  - ‚úÖ Alternative spelling discovery with examples
  - ‚úÖ Voicing information for consonants
  - ‚úÖ Articulation guidance with placement and tips
  - ‚úÖ Assessment criteria generation (stage-specific)
  - ‚úÖ Research citation linking and pedagogical rationale
  - ‚úÖ UI integration helpers (`uiIntegration.ts`)
  - ‚úÖ Comprehensive test framework ready

### üîÑ In Progress
- **Phase 3: Display Logic Framework** ‚¨ÖÔ∏è **CURRENT PHASE**
  - Integrating content generation with existing UI components
  - Creating seamless content display rules

### ‚è≥ Planned
- Phase 3: Complete UI integration and display logic framework  
- Phase 4: Full database generation for all 44+ phonemes

## Key Design Principles
1. **Rule-Based**: No hardcoded content, everything generated by intelligent rules
2. **Research-Aligned**: All content follows Science of Reading principles
3. **Scalable**: Framework must work for all 44+ phonemes consistently
4. **Accurate**: Claims must be factually supported (e.g., 95% decodability)
5. **Flexible**: Teachers can access any phoneme without restrictions

## Notes
- Framework uses existing 8-stage system as foundation for decodability
- Current /sh/ implementation provides "good enough" formatting template
- Final formatting polish will be applied after framework completion
- Each phase builds foundation for the next

---
*Last Updated: Phase 1 Initiation*